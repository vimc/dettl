<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Generate log data and manage recording timings for an import — ImportLog • dettl</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Generate log data and manage recording timings for an import — ImportLog"><meta property="og:description" content="Generate log data and manage recording timings for an import
Generate log data and manage recording timings for an import"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dettl</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/dettl.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate log data and manage recording timings for an import</h1>
    
    <div class="hidden name"><code>ImportLog.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Generate log data and manage recording timings for an import</p>
<p>Generate log data and manage recording timings for an import</p>
    </div>


    <div id="details">
    <h2>Details</h2>
    <p>Class to help help manage initialising log data, managing recording
time for log to run and importing row to the log table.</p>
    </div>
    <div id="public-fields">
    <h2>Public fields</h2>
    <p></p><div class="r6-fields"><dl><dt><code>log_data</code></dt>
<dd><p>The current log data</p></dd>


</dl><p></p></div>
    </div>
    <div id="methods">
    <h2>Methods</h2>
    
<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-ImportLog-new"><code>ImportLog$new()</code></a></p></li>
<li><p><a href="#method-ImportLog-set_comment"><code>ImportLog$set_comment()</code></a></p></li>
<li><p><a href="#method-ImportLog-start_timer"><code>ImportLog$start_timer()</code></a></p></li>
<li><p><a href="#method-ImportLog-stop_timer"><code>ImportLog$stop_timer()</code></a></p></li>
<li><p><a href="#method-ImportLog-write_log"><code>ImportLog$write_log()</code></a></p></li>
<li><p><a href="#method-ImportLog-verify_first_run"><code>ImportLog$verify_first_run()</code></a></p></li>
</ul></div><p></p><hr><a id="method-ImportLog-new"></a><div class="section">
<h3 id="method-new-">Method <code>new()</code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Build the data to be written to the import log</p>

<p>Create import log instance for managing creating log data and
importing to db.</p>
<p>Initialises log data and verifies that import can be logged. Set
a comment for the log using <code>set_comment</code></p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/ImportLog.html">ImportLog</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">con</span>, <span class="va">log_table</span>, <span class="va">path</span>, <span class="va">language</span>, <span class="va">mode</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>con</code></dt>
<dd><p>Connection to db to add log record to</p></dd>


<dt><code>log_table</code></dt>
<dd><p>Name of the import log table</p></dd>


<dt><code>path</code></dt>
<dd><p>Path to import being run</p></dd>


<dt><code>language</code></dt>
<dd><p>The language for the import, R or sql.</p></dd>


<dt><code>language</code></dt>
<dd><p>The language for the import, R or sql</p></dd>


<dt><code>mode</code></dt>
<dd><p>The mode of the import, only relevant for an R import.</p></dd>


<dt><code>mode</code></dt>
<dd><p>The mode of the import, only relevant for an R import</p></dd>


<dt><code>import_path</code></dt>
<dd><p>Path to the import process directory.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>The prepared data for the log table. This is the name
of the import, the date, comment and git information including
user name, user email, current branch and hash of HEAD.</p>
</div>

</div><p></p><hr><a id="method-ImportLog-set_comment"></a><div class="section">
<h3 id="method-set-comment-">Method <code>set_comment()</code><a class="anchor" aria-label="anchor" href="#method-set-comment-"></a></h3>
<p>Set the comment on the log data</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">ImportLog</span><span class="op">$</span><span class="fu">set_comment</span><span class="op">(</span><span class="va">comment</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>comment</code></dt>
<dd><p>The comment to be stored with this import.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-ImportLog-start_timer"></a><div class="section">
<h3 id="method-start-timer-">Method <code>start_timer()</code><a class="anchor" aria-label="anchor" href="#method-start-timer-"></a></h3>
<p>Start the import log timer</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">ImportLog</span><span class="op">$</span><span class="fu">start_timer</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-ImportLog-stop_timer"></a><div class="section">
<h3 id="method-stop-timer-">Method <code>stop_timer()</code><a class="anchor" aria-label="anchor" href="#method-stop-timer-"></a></h3>
<p>Stop the import log timer, adding duration to the total recorded
duration.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">ImportLog</span><span class="op">$</span><span class="fu">stop_timer</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-ImportLog-write_log"></a><div class="section">
<h3 id="method-write-log-">Method <code>write_log()</code><a class="anchor" aria-label="anchor" href="#method-write-log-"></a></h3>
<p>Write the log data to the database.</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">ImportLog</span><span class="op">$</span><span class="fu">write_log</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-ImportLog-verify_first_run"></a><div class="section">
<h3 id="method-verify-first-run-">Method <code>verify_first_run()</code><a class="anchor" aria-label="anchor" href="#method-verify-first-run-"></a></h3>
<p>Verify that this is the first time the import has been run.</p>
<p>Check whether an import with the same name has been run already. If
so then stop with a human understandable message.</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">ImportLog</span><span class="op">$</span><span class="fu">verify_first_run</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p>Throws an error if an import with the same name has already been run</p>
</div>

</div>

    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Robert Ashton.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

